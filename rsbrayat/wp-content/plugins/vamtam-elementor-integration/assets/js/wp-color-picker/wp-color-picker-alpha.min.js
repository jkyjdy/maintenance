!function(p){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==";Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);return this.error?"":(e.length<6&&(e=("00000"+e).substr(-6)),"#"+e)},p.widget("wp.wpColorPicker",p.wp.wpColorPicker,{_create:function(){if(p.support.iris){var o=this,e=o.element;if(p.extend(o.options,e.data()),"hue"===o.options.type)return o._createHueOnly();o.close=p.proxy(o.close,o),o.initialValue=e.val(),e.addClass("wp-color-picker"),e.parent("label").length||(e.wrap("<label></label>"),o.wrappingLabelText=p('<span class="screen-reader-text"></span>').insertBefore(e).text(wpColorPickerL10n.defaultLabel)),o.wrappingLabel=e.parent(),o.wrappingLabel.wrap('<div class="wp-picker-container" />'),o.wrap=o.wrappingLabel.parent(),o.toggler=p('<button type="button" class="button wp-color-result" aria-expanded="false"><span class="wp-color-result-text"></span></button>').insertBefore(o.wrappingLabel),o.toggler.find(".wp-color-result-text").text(wpColorPickerL10n.pick),o.pickerContainer=p('<div class="wp-picker-holder" />').insertAfter(o.wrappingLabel),o.button=p('<input type="button" class="button button-small" />'),o.options.defaultColor?o.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString).attr("aria-label",wpColorPickerL10n.defaultAriaLabel):o.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear).attr("aria-label",wpColorPickerL10n.clearAriaLabel),o.wrappingLabel.wrap('<span class="wp-picker-input-wrap hidden" />').after(o.button),o.inputWrapper=e.closest(".wp-picker-input-wrap"),o.toggler.css({padding:0}),o.toggler.find(".wp-color-result-text").hide();function i(e){o.options.alpha?(o.toggler.css({"background-image":"url("+n+")",position:"relative"}),o.toggler.find("span.color-alpha").length||o.toggler.append('<span class="color-alpha" />'),o.toggler.find("span.color-alpha").css({backgroundColor:e})):o.toggler.css({backgroundColor:e})}var t=Object.values(VamtamColorPickerStrings.accents),r=t.length;if(r&&o.pickerContainer.addClass("vamtam-accents"),e.iris({target:o.pickerContainer,hide:o.options.hide,width:o.options.width,mode:o.options.mode,palettes:r?o.options.palettes.concat(t):o.options.palettes,change:function(e,t){i(t.color),p.isFunction(o.options.change)&&o.options.change.call(this,e,t)}}),e.val(o.initialValue),i(o.initialValue),o._addListeners(),r){o.pickerContainer.find(".iris-palette-container").children().slice(-8).each(function(e,t){p(t).attr("data-accent",++e)});var a=this._sanitizeAccent(o.initialValue);a&&(a.isCssVar?o.element.iris("color",a.userFriendly):o.element.iris("color",o.initialValue))}o.pickerContainer.find(".iris-palette-container").on("click.palette",".iris-palette",function(e){var t=e.target&&p(e.target).attr("data-accent");t&&o.element.iris("color","var(--vamtam-accent-color-"+t+")")}),o.options.hide||o.toggler.click()}},open:function(){this.element.iris("toggle"),this.inputWrapper.removeClass("hidden"),this.wrap.addClass("wp-picker-active"),this.toggler.addClass("wp-picker-open").attr("aria-expanded","true"),p("body").on("click.wpcolorpicker",this.close)},_addListeners:function(){var t=this;t.wrap.on("click.wpcolorpicker",function(e){e.stopPropagation()}),t.toggler.click(function(){t.toggler.hasClass("wp-picker-open")?t.close():t.open()}),t.element.on("change",function(e){""!==p(this).val()&&!t.element.hasClass("iris-error")||(t.options.alpha?t.toggler.find("span.color-alpha").css("backgroundColor",""):t.toggler.css("backgroundColor",""),p.isFunction(t.options.clear)&&t.options.clear.call(this,e))}),t.button.on("click",function(e){p(this).hasClass("wp-picker-clear")?(t.element.val(""),t.options.alpha?t.toggler.find("span.color-alpha").css("backgroundColor",""):t.toggler.css("backgroundColor",""),p.isFunction(t.options.clear)&&t.options.clear.call(this,e)):p(this).hasClass("wp-picker-default")&&t.element.val(t.options.defaultColor).change()})},_sanitizeAccent:function(e){if(e.match(/^var\(--vamtam-accent-color-(\d)\)$/))return{val:e,isCssVar:!0,userFriendly:e.substr(e.indexOf("accent"),14).replace("-color-","")};var t=e.match(/^accent(\d)/);return!!t&&VamtamColorPickerStrings.accents[t[1]]}}),p.widget("a8c.iris",p.a8c.iris,{_create:function(){if(this._super(),this.options.alpha=this.element.data("alpha")||!1,this.element.is(":input")||(this.options.alpha=!1),void 0!==this.options.alpha&&this.options.alpha){var o=this,e=o.element,t=p('<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>').appendTo(o.picker.find(".iris-picker-inner")),i=t.find(".iris-slider-offset-alpha"),r={aContainer:t,aSlider:i};void 0!==e.data("custom-width")?o.options.customWidth=parseInt(e.data("custom-width"))||0:o.options.customWidth=100,o.options.defaultWidth=e.width(),o._color._alpha<1||o._color.toString().indexOf("rgb"),e.width(parseInt(o.options.defaultWidth+o.options.customWidth)),p.each(r,function(e,t){o.controls[e]=t}),o.controls.square.css({"margin-right":"0"});var a=o.picker.width()-o.controls.square.width()-20,n=a/6,s=a/2-n;p.each(["aContainer","strip"],function(e,t){o.controls[t].width(s).css({"margin-left":n+"px"})}),o.setAlphaSliderBackground(),o._initControls()}},_initControls:function(){if(this._super(),this.options.alpha){var o=this;o.controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*o._color._alpha),slide:function(e,t){o._color._alpha=parseFloat(t.value/100),o._change.apply(o,arguments)}})}},_change:function(){var a=this,n=a.controls,s=a._getHSpaceColor(),e=["square","strip"],l=a.options.controls,t=l[a.active]||"external",o=a.hue;"strip"===a.active?e=[]:"external"!==a.active&&e.pop(),p.each(e,function(e,t){var o,i,r;if(t!==a.active)switch(t){case"strip":o="h"===l.strip?a._scale[l.strip]-s[l.strip]:s[l.strip],n.stripSlider.slider("value",o);break;case"square":i=a._squareDimensions(),r={left:s[l.horiz]/a._scale[l.horiz]*i.w,top:i.h-s[l.vert]/a._scale[l.vert]*i.h},a.controls.squareDrag.css(r)}}),s.h!==o&&a._isNonHueControl(a.active,t)&&a._color.h(o),a.hue=a._color.h(),a.options.accent||(a.options.color=a._color.toString()),a._inited&&a._trigger("change",{type:a.active},{color:a._color}),a.element.is(":input")&&!a._color.error&&(a.element.removeClass("iris-error"),a.options.accent?a.options.accent.isCssVar?a.element.val()!==a.options.color&&a.element.val(a.options.accent.userFriendly):a.element.val()!==a.options.color&&a.element.val(a.options.color):a.element.val()!==a._color.toString()&&a.element.val(a._color.toString())),delete a.options.accent,a._paint(),a._inited=!0,a.active=!1;var i=a.element;if(a.options.alpha){n=a.controls;var r=parseInt(100*a._color._alpha),c=a.picker.closest(".wp-picker-container").find(".wp-color-result");a.setAlphaSliderBackground(),c.hasClass("wp-picker-open")&&(n.aSlider.slider("value",r),a._color._alpha<1&&n.strip.attr("style",n.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,"rgb($1$3$5)")))}!i.data("reset-alpha")&&1||a.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){a._color._alpha=1,a.active="external",a._change()})},_setOption:function(e,t){var o,i,r=this,a=r.options[e],n=!1;switch(r.options[e]=t,e){case"color":(t=""+t).replace(/^#/,"");var s=this._sanitizeAccent(t);s?(o=s.isCssVar?new Color(VamtamColorPickerStrings.accents[t[t.length-2]]).setHSpace(r.options.mode):new Color(VamtamColorPickerStrings.accents[t[t.length-1]]).setHSpace(r.options.mode),r.options.accent=s):o=new Color(t).setHSpace(r.options.mode),o.error&&!s?r.options[e]=a:(r._color=o,r.options.color=r.options[e]=s?t:r._color.toString(),r.active="external",r._change());break;case"palettes":n=!0,t?r._addPalettes():r.picker.find(".iris-palette-container").remove(),a||r._paletteListeners();break;case"width":n=!0;break;case"border":n=!0,i=t?"addClass":"removeClass",r.picker[i]("iris-border");break;case"mode":case"controls":if(a===t)return;return i=r.element,(a=r.options).hide=!r.picker.is(":visible"),r.destroy(),r.picker.remove(),p(r.element).iris(a)}n&&r._dimensions(!0)},_sanitizeAccent:function(e){if(e.match(/^var\(--vamtam-accent-color-(\d)\)$/))return{val:e,isCssVar:!0,userFriendly:e.substr(e.indexOf("accent"),14).replace("-color-","")};var t=e.match(/^accent(\d)/);return!!t&&VamtamColorPickerStrings.accents[t[1]]},_addInputListeners:function(i){function e(e){var t=new Color(i.val()),o=i.val();isAccent=r._sanitizeAccent(o),i.removeClass("iris-error"),isAccent?isAccent.isCssVar?r._setOption("color",o):r._setOption("color","var(--vamtam-accent-color-"+o[o.length-1]+")"):t.error?""!==o&&i.addClass("iris-error"):t.toString()!==r._color.toString()&&("keyup"===e.type&&o.match(/^[0-9a-fA-F]{3}$/)||r._setOption("color",t.toString()))}var r=this;i.on("change",e).on("keyup",r._debounce(e,100)),r.options.hide&&i.on("focus",function(){r.show()})},setAlphaSliderBackground:function(){var e=this._color.toRgb(),t=["rgb("+e.r+","+e.g+","+e.b+") 0%","rgba("+e.r+","+e.g+","+e.b+", 0) 100%"];this.controls.aContainer.css({background:"linear-gradient(to bottom, "+t.join(", ")+"), url("+n+")"})}})}(jQuery);